## Changelog 0216-17 (sifeil)

 - [x] train.py
	 - [x] save args to work_dir
	 - [x] fix distributeparallel for latest mmcv
 - [x] Add unsample_bilinear to p2 (1/4->1/8) and p6 (1/64->1/32), see solo_head, fowrard()
 - [x] Add GN to coord conv
 - [x] FPN remains default
 - [x] Add back dict_loss_batch() and fixed loss()
 - [x] Change mask_preds and gt_masks to 2*b_h and 2*b_w- - 
	 - [x] mask loss done at 1/4 for all the levels
	 - [x] for 2x for pos mask only
 - [x] check 1X:
 ``` 
 Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.245
 Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.452
 Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.234
 Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.049
 Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.261
 Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.426
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.224
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.323
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.334
 Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.094
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.375
 Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.548
 ```
 - [x] check epoch 14: 20.6/20.0 (pr/rc)
 - [ ] check epoch 36: 

`2020-02-16 22:19:50,321 - INFO - Start running, host: root@1037871, work_dir: /instance_v1/SOLO_OURS/r50_p2_p6_match_aug_0216`

`2020-02-17 06:23:33,323 - INFO - Start running, host: root@1034753, work_dir: /instance_v1/SOLO_OURS/r50_p2_p6_match_1X`

`./tools/train.py --local_rank=0 configs/solo/r50_p2_p6_match-v2.py --launcher pytorch --work_dir r50_p2_p6_match_1X_v2`

`./tools/train.py --local_rank=6 configs/solo/r50_p2_p6_match-v3.py --launcher pytorch --work_dir r50_p2_p6_match_1X_v3`

`./tools/train.py --local_rank=0 configs/solo/r50_p2_p6_match-v4.py --launcher pytorch --work_dir lossx4_match_1Xv4` (loss at 1/2)

`./tools/train.py --local_rank=5 configs/solo/r50_p2_p6_match_augv2.py --launcher pytorch --work_dir caffesgd_match_randscale`

----------------------------------------------

`root@1043887:/instance_v1/SOLO_OURS# ./tools/dist_train.sh configs/sol
o/r50_p2_p6_match_aug.py 8 --work_dir r50_p2_p6_match_aug_fixgt` (use ***transform_fixgt***)

`root@1043979:/instance_v1/SOLO_OURS# ./tools/dist_train.sh configs/solo/r50_p2_p6_match_aug.py 8 --work_dir r50_p2_p6_match_aug_fixgt_v2` (use ***transform_fixgtv2***)

## Ablations considered (bold is better)

 - [x] Unsample **before** or after branch-net (mask branch)
 - [x]  `r50_p2_p6_match-v2.py` Focal loss, gamma=2.20, alpha=0.3:  **no difference**
 - [x]  Tried score_thr=0.05, **no difference**
 - [ ] `r50_p2_p6_match-v3.py` add extra conv, add relu on top of fpn head (better at epoch 8, 1042705)
 - [ ] `/instance_v1/SOLO_OURS/caffesgd_match_randscale`: 
	 - tried caffe sgd
	 - `# pred_mask = F.upsample_bilinear(F.sigmoid(mask_preds[i][ind]).unsqueeze(0), (2*b_h, 2*b_w)).squeeze()` 
	 changed to: 
		`pred_mask = F.sigmoid(F.upsample_bilinear(mask_preds[i][ind].unsqueeze(0), (2*b_h, 2*b_w)).squeeze())`
	- no relu after fpn*
 - [ ] `/r50_p2_p6_match_aug_fixgt`: fix cls gt in transform

<!--stackedit_data:
eyJoaXN0b3J5IjpbMTAwNDExNzkyMywzNDI1NDg4NzAsLTI2OT
k3Mjc0NywtMTgwNDExNzI1OSw1MTIwNTA3NjMsLTIwMjU0Nzg2
OTMsNzUwNTQzNTA0LC0xMTkyMDM2NTAzLDg1NTc3OTM2MSwtNT
QyNjU4MzQyLC01NTcwNjEzOCwxNjA5NzE0MzAsLTU1Mjk0MjYz
MSwyMzM1NTM5MTMsMzkxOTA1NDk2XX0=
-->